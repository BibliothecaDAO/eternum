# Please be mindful that changing the content of this file will impact the Eternum Launcher app

rpc = "https://api.cartridge.gg/x/starknet/mainnet"

world_address = "0x656c7780d54a545802da391bc1c34dc643e82d8f24fb3149a5912ce62d628b5"

db_dir = "torii-mainnet"

[indexing]
events_chunk_size = 1024  # Size of events page to fetch
blocks_chunk_size = 10240 # Blocks to process before DB commit

pending = true # Enable indexing pending blocks

polling_interval = 500 # Polling interval in milliseconds

max_concurrent_tasks = 100 # Maximum concurrent indexing tasks

transactions = true

contracts = [
	  "erc721:0x07ae27a31bb6526e3de9cf02f081f6ce0615ac12a6d7b85ee58b8ad7947a2809",   # Realms
	  "erc721:0x060e8836acbebb535dfcd237ff01f20be503aae407b67bb6e3b5869afae97156",	 # Season Pass
	  "erc721:0x0572fe34a769058c62a66f0c4854d08ccfd21fcbb4f0b1685a1868b84c6ee266", 	 # Loot Chests
	  "erc20:0x0124aeb495b947201f5fac96fd1138e326ad86195b98df6dec9009158a533b49",	 # Lords
	  "erc721:0x01f36515d7d307c9d3e41df48f29e9a6b4bbc445d0fbdbbce944a4678cd52b02",    # Cosmetics
	  "erc721:0x0117fEcA92E98Eeca862099c0B4567F32c252bF1b736F2946F0df4f42FA8A544",    # Cosmetics Claim
      "erc721:0x027838dea749f41c6f8a44fcfa791788e6101080c1b3cd646a361f653ad10e2d",    # Golden Token
	  "erc721:0x046da8955829adf2bda310099a0063451923f02e648cf25a1203aac6335cf0e4",    # Beasts V2.1
]

namespaces = ["marketplace"]

[erc]
max_metadata_tasks = 50  # Increase concurrent metadata tasks for better ERC token processing

world_block = 664160

[sql]
all_model_indices = false

historical = []
cache_size = -156_250_000 # 20GB of cache size - increased for better query performance
page_size = 65_536 # 64KB pages - better for large queries

# Model indices for marketplace performance optimization
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order_id"]

# Composite index for active orders filtering (most selective fields first)
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.active", "order.collection_id", "order.owner", "order.expiration"]

# Composite index optimized for price sorting within a collection
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.collection_id", "order.active", "order.price"]

# Index for token lookups
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.token_id"]

# Index for owner filtering
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.owner"]

# Composite index for active orders with token_id (for JOIN optimization)
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.active", "order.token_id"]

# Composite index for expiration checks
[[sql.model_indices]]
model_tag = "marketplace-MarketOrderModel"
fields = ["order.expiration", "order.active"]

[server]
http_cors_origins = ["*"]

[events]
raw = true