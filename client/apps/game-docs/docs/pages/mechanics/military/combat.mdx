import { BiomeCombat } from "@/components/BiomeCombat";
import {
  TotalArmiesTable,
  RealmDefenseSlotsTable,
  WorldStructureDefenseSlotsTable,
} from "@/components/DefendingArmies";

# ⚔️ Combat

## Armies

In Season 1, armies consist of a single troop type and tier—streamlining combat strategy and simplifying interactions on
the world map. Each hex can host only one army, so Lords must carefully manage their positioning and engagement
opportunities.

Each Realm and Village has a limited number of total armies, from which Lords can choose to deploy either attacking or
defending armies. The number of total armies can be increased by upgrading the Realm / Village level:

<TotalArmiesTable />

Each military building constructed on a Realm also increases total armies by 1. The maximum size of an army is 100,000
troops.

### Attacking Armies

Attacking armies are deployed onto one of the six hexes surrounding their parent Realm on the world map. If all hexes
adjacent to the Realm are occupied, an attacking army cannot be deployed. Once deployed, these armies occupy a hex and
traverse the world map based on the conditions outlined in the World Map & Movement section.

Armies may attack another army or structure on any adjacent hex. When attacking a structure, the attacking army will
engage in combat against any defending armies present.

### Defending Armies

Defending armies do not appear on the world map; instead, they occupy defense slots visible in the Military tab of the
Local view. When in the World view, Lords can observe the defensive capabilities of any structure by selecting a hex and
opening up the details tab. Realms and Villages have a maximum number of defensive slots based on their current level:

<RealmDefenseSlotsTable />

Other world structures have a static number of defence slots:

<WorldStructureDefenseSlotsTable />

When attacked, defending armies are targeted sequentially, starting from the outermost slot (slot 4) and progressing
inward. The outermost defensive army may also launch counter attacks against adjacent hexes. If a defensive army is
destroyed, its slot becomes unavailable for reinforcement for 24 hours. Once all defensive armies are defeated, the
Realm can be claimed by an adjacent attacking army.

## Troop Tiers

Troops in Eternum come in three distinct tiers: T1, T2, and T3. Tier 1 (T1) represents basic troops, while T2 and T3
troops are more advanced, offering significantly increased combat strength and stamina.

Higher-tier troops are produced by constructing specialized buildings that require rare resources and lower-tier troops
as inputs:

- Two T1 troops combine to produce one T2 troop
- Two T2 troops combine to produce one T3 troop

Each troop tier provides escalating advantages in terms of damage output and stamina.

## Stamina

Both attacking and defending armies depend heavily on stamina during combat encounters. Armies recover +20 stamina at
the start of each Eternum Day. Lords must carefully manage their armies' stamina, as exhausted armies will perform
poorly if attacked.

### Stamina Effects in Combat

**Attacking Armies:**

- Attacks require a minimum of 30 stamina
- Each stamina point above 30 grants an additional 1% damage, up to a maximum of 30% extra damage (total of 60 stamina)
- Armies with less than 30 stamina cannot initiate an attack

**Defending Armies:**

- Defending armies need at least 30 stamina to fight at full effectiveness
- Defenders with less than 30 stamina suffer a proportional damage penalty—down to a maximum reduction of 30% if their
  stamina reaches zero

## Biomes (Combat Effects)

Biomes significantly influence combat effectiveness, providing each troop type either a distinct advantage (+30%
damage), a disadvantage (–30% damage), or no modifier. When resolving combat, only the biome of the defending army's hex
is considered. Therefore, attacking armies must carefully select their targets to exploit biome conditions to their
advantage.

### Troop Type Biome Logic

**Knights:**

- Excel in forested biomes, utilizing both mobility and cover
- Struggle in unstable terrain (beaches, tundra, snow) and hot deserts due to heavy armor

**Crossbowmen:**

- Benefit from open seas and unstable terrain (beaches, snow, scorched ground) due to ranged capabilities
- Disadvantaged on sparse, flat terrains lacking sufficient cover

**Paladins:**

- Dominate on open terrain, leveraging mounted maneuverability
- Dense forests, scorched earth, and aquatic environments reduce combat effectiveness significantly

<BiomeCombat />

## Damage

Combat in Eternum is determined by a simplified damage system, relying primarily on army damage statistics, stamina
modifiers, and biome interactions. Detailed damage calculations consider base damage, stamina bonuses or penalties,
troop tier multipliers, and biome modifiers, resulting in straightforward yet strategic combat outcomes.
